FROM adamrehn/distrobox-base-arch:latest

# Install our various command-line tools
RUN --mount=type=cache,target=/var/cache/pacman,sharing=locked \
	pacman -Syu --needed --noconfirm \
		ffmpeg \
		gdal \
		git \
		graphviz \
		imagemagick \
		pandoc-cli \
		pdf2svg \
		perl-image-exiftool \
		poppler

# Add the directory containing the ExifTool script to the PATH
ENV PATH="$PATH:/usr/bin/vendor_perl"

# Export the binaries for ExifTool
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},exiftool"

# Export the binaries for FFmpeg
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},ffmpeg"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},ffplay"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},ffprobe"

# Export the binaries for GDAL
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal2tiles"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal2xyz"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal_calc"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal_contour"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal_create"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal_edit"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal_fillnodata"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal_footprint"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal_grid"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal_merge"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal_pansharpen"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal_polygonize"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal_proximity"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal_rasterize"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal_retile"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal_sieve"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal_translate"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdal_viewshed"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdaladdo"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdalattachpct"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdalbuildvrt"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdalcompare"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdaldem"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdalenhance"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdalinfo"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdallocationinfo"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdalmanage"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdalmdiminfo"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdalmdimtranslate"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdalmove"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdalsrsinfo"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdaltindex"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdaltransform"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gdalwarp"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gnmanalyse"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gnmmanage"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},nearblack"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},ogr2ogr"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},ogr_layer_algebra"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},ogrinfo"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},ogrlineref"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},ogrmerge"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},ogrtindex"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},pct2rgb"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},rgb2pct"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},sozip"

# Export the binaries for Git
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},git"

# Export the binaries for Graphviz
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},acyclic"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},bcomps"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},ccomps"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},circo"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},cluster"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},diffimg"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},dijkstra"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},dot"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},dot2gxl"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},dot_builtins"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},dot_sandbox"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},edgepaint"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},fdp"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gc"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gml2gv"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},graphml2gv"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gv2gml"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gv2gxl"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gvcolor"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gvedit"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gvgen"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gvmap"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gvpack"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gvpr"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gxl2dot"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},gxl2gv"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},mm2gv"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},neato"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},nop"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},osage"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},patchwork"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},prune"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},sccmap"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},sfdp"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},tred"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},twopi"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},unflatten"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},vimdot"

# Export the binaries for ImageMagick
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},magick"

# Export the binaries for Pandoc
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},pandoc"

# Export the binaries for pdf2svg
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},pdf2svg"

# Export the binaries for Poppler
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},pdfattach"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},pdfdetach"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},pdffonts"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},pdfimages"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},pdfinfo"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},pdfseparate"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},pdfsig"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},pdftocairo"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},pdftohtml"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},pdftoppm"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},pdftops"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},pdftotext"
ENV CONTAINER_EXPORTED_BINS="${CONTAINER_EXPORTED_BINS},pdfunite"
